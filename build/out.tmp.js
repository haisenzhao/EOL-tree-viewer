vole.TreeAdapter=function(){this.helper=this};vole.TreeAdapter.prototype.eolapi=new EolApi();vole.TreeAdapter.prototype.getDataObjects=vole.TreeAdapter.prototype.eolapi.getDataObjects;vole.TreeAdapter.prototype.matchEOLTaxonConceptID=function(){var a=new jQuery.Deferred(),c=this.getName(),b=this.data;this.eolapi.search(c).done(function(d){var e=d.results,f;if(e.length==0){b.taxonConceptID=null;a.resolve(null);return}f=jQuery.grep(e,function(g,h){return g.title===c});if(f.length>0){b.taxonConceptID=f[0].id}else{b.taxonConceptID=e[0].id}a.resolve(b.taxonConceptID)});return a.promise()};vole.TreeAdapter.prototype.getImage=function getImage(c){var b=jQuery("<img src='images/ajax-loader.gif'>"),a=this.eolapi;this.getEOLPage().done(function(f){var e,d;if(!f){b.attr("src","images/no_image.png");return}e=a.getDataObjects("StillImage",f)[0];if(e){if(c){d=e.eolThumbnailURL}else{d=e.eolMediaURL||e.mediaURL}}if(d){b.addClass("resizable");b.attr("src",d)}else{b.attr("src","images/no_image.png")}});return b[0]};vole.TreeAdapter.prototype.getEOLPage=function getEOLPage(){var c=this.data,b=this.eolapi,a=new jQuery.Deferred();if(c.page){return a.resolve(c.page)}this.matchEOLTaxonConceptID().done(function(d){if(!d){c.page=null;a.resolve(null)}b.pages(d).done(function(e){c.page=e;a.resolve(e)})});return a};